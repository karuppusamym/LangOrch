{
  "$schema": "https://example.com/ckp-schema.json",
  "procedure_id": "test_secrets",
  "procedure_version": "1.0.0",
  "description": "Test workflow to validate secrets integration",
  "global_config": {
    "secrets_config": {
      "provider": "env_vars",
      "secret_references": {
        "test_api_key": "TEST_API_KEY"
      }
    }
  },
  "variables_schema": {},
  "start_node_id": "print_secret",
  "nodes": [
    {
      "node_id": "print_secret",
      "node_type": "step",
      "steps": [
        {
          "step_id": "print_value",
          "executor_id": "python_exec",
          "parameters": {
            "script": "print(f'Secret loaded: {secrets.get(\"test_api_key\", \"NOT_FOUND\")}')"
          }
        }
      ],
      "transitions": [
        {
          "condition": "always",
          "target_node_id": "end"
        }
      ]
    },
    {
      "node_id": "end",
      "node_type": "end",
      "terminal_status": "success"
    }
  ]
}
